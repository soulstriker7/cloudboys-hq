<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cloud Boys HQ</title>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Outfit',sans-serif;background:linear-gradient(135deg,#6b48ff,#9d7eff);color:#fff;min-height:100vh;padding:20px}
.c{max-width:1200px;margin:0 auto}
header{background:rgba(255,255,255,.15);backdrop-filter:blur(12px);padding:20px;border-radius:20px;display:flex;align-items:center;gap:20px;margin-bottom:25px}
header img{width:80px;border-radius:50%}
header h1{font-size:2.4rem;font-weight:700}
.type{background:rgba(255,255,255,.2);padding:8px 16px;border-radius:30px;font-weight:600}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin:25px 0}
.card{padding:20px;border-radius:16px;text-align:center}
.blue{background:#5b9eff}.purple{background:#9f74ff}.brown{background:#b98b6e}.teal{background:#5cc9b4}
.card strong{font-size:2rem;display:block;margin-top:8px}
.panel{background:rgba(255,255,255,.15);backdrop-filter:blur(12px);padding:20px;border-radius:20px;margin-bottom:20px}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{padding:12px;text-align:left}
th{background:rgba(255,255,255,.1)}
tr:nth-child(even){background:rgba(255,255,255,.05)}
footer{text-align:center;opacity:.8;margin-top:30px}
</style>
</head>
<body>
<div class="c">
  <header>
    <img id="badge" src="" alt="Badge">
    <div>
      <h1>Cloud Boys HQ</h1>
      <p id="tag">#QGPQC9G2</p>
      <p>India</p>
    </div>
    <div class="type">Open</div>
  </header>

  <div class="grid">
    <div class="card blue"><span>Clan Trophies</span><strong id="trophies">…</strong></div>
    <div class="card purple"><span>River Race Points</span><strong id="racePts">…</strong></div>
    <div class="card brown"><span>Donations/Week</span><strong id="dons">…</strong></div>
    <div class="card teal"><span>Members</span><strong id="mems">…</strong>/50</div>
  </div>

  <div class="panel">
    <h2>Top 10 Members</h2>
    <table><thead><tr><th>#</th><th>Name</th><th>Trophies</th><th>Donations</th><th>Role</th></tr></thead><tbody id="members"></tbody></table>
  </div>

  <div class="panel">
    <h2>River Race Fame Leaderboard</h2>
    <table><thead><tr><th>#</th><th>Player</th><th>Fame</th></tr></thead><tbody id="race"></tbody></table>
  </div>

  <footer>Last update: <span id="time"></span> • Updates every 2 min</footer>
</div>

<script>
const tag = "QGPQC9G2";
const proxy = "https://api.allorigins.win/get?url="; // Free public proxy for Royale API

async function go(){
  try{
    const clanUrl = `${proxy}${encodeURIComponent('https://api.clashroyale.com/v1/clans/%23' + tag)}`;
    const memUrl = `${proxy}${encodeURIComponent('https://api.clashroyale.com/v1/clans/%23' + tag + '/members')}`;
    const riverUrl = `${proxy}${encodeURIComponent('https://api.clashroyale.com/v1/clans/%23' + tag + '/riverrace')}`;

    const clanRes = await fetch(clanUrl);
    const clanData = await clanRes.json();
    const clan = JSON.parse(clanData.contents);

    const memRes = await fetch(memUrl);
    const memData = await memRes.json();
    const mem = JSON.parse(memData.contents);

    const riverRes = await fetch(riverUrl);
    const riverData = await riverRes.json();
    const river = JSON.parse(riverData.contents);

    document.getElementById("badge").src=clan.badgeUrls.medium;
    document.getElementById("trophies").textContent=clan.clanScore.toLocaleString();
    document.getElementById("mems").textContent=clan.members;
    document.getElementById("dons").textContent=mem.items.reduce((a,b)=>a+b.donations,0).toLocaleString();

    const m=document.getElementById("members"); m.innerHTML="";
    mem.items.sort((a,b)=>b.trophies-a.trophies).slice(0,10).forEach((p,i)=>{
      m.innerHTML+=`<tr><td>${i+1}</td><td>${p.name}</td><td>${p.trophies}</td><td>${p.donations}</td><td>${p.role[0].toUpperCase()+p.role.slice(1)}</td></tr>`;
    });

    const r=document.getElementById("race"); r.innerHTML="";
    (river.clan?.participants||[]).sort((a,b)=>b.fame-a.fame).slice(0,10).forEach((p,i)=>{
      r.innerHTML+=`<tr><td>${i+1}</td><td>${p.name}</td><td>${p.fame.toLocaleString()}</td></tr>`;
    });

    document.getElementById("time").textContent=new Date().toLocaleTimeString();
  }catch(e){console.error(e); document.getElementById("trophies").textContent="Error - Check console (F12)";}
}
go(); setInterval(go,120000);
</script>
</body>
</html>
